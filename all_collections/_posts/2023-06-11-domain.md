---
layout: post
title: 🌏 주문을 하면 주방에선 어떤 일이 벌어질까?
date: 2023-06-11
categories: ["SamBeak", "Domain", "Web", "browser"]
---

> # 주문을 하면 주방에선 어떤 일이 벌어질까?

<br>
아무런 생각 없이 요리를 하다 문득 생각이 나 다급히 책상에 앉았다. <br>
맛집에 가서 음식을 주문하면 <br>
해당 음식이 나온다는건 엄청 당연한 일이다. <br>
물론, 주문 실수가 없다는 전제에서말이다. 😓 <br><br>

마찬가지로, 인터넷에서 네이버를 검색했을 때 <br>
네이버의 화면이 보인다는 건 고객으로서는 <br>
엄청 당연한 일일지도 모른다. <br><br>

그런데, 돌이켜보면 내가 요리를 업으로 삼을 때 <br>
주문 받은 요리를 조리해 선보인다는 건 <br>
그 안에 굉장히 다양한 과정이 수반됐고 <br>
단순하면서도 때로는 복잡한 동작이 따르기도 했다. <br><br>

손님이 그 과정을 다 알 필요는 결단코 없지만 <br>
요리사가 해당 요리의 레시피나 과정을 모른다는건 <br>
말도 안 되는 일이다. <br><br>

마찬가지로, 프론트엔드나 백엔드나 상관 없이 <br>
웹 개발을 하고 있는 지금 <br>
웹이 동작하는 과정을 모르고 있다는 것은 <br>
정말이지 말도 안 되는 일이다. <br><br>

그래서 앞치마를 내려놓고 <br>
다급히 정리해본다. <br><br>

> # 주문 후 일어나는 과정

<br>
사용자가 브라우저에 도메인 이름을 입력하면 <br>
HTTP는 URL 주소 중 도메인이름만 DNS 서버로 검색한다. <br>
DNS 서버는 해당 도메인 이름에 해당하는 IP와 URL을 HTTP에게 건내준다. <br>
HTTP는 받은 IP와 URL정보로 HTTP 요청 메시지를 만들고 <br>
TCP 프로토콜을 사용해 인터넷을 거쳐 해당 IP주소의 컴퓨터로 보낸다. <br><br>

HTTP 요청은 해당 IP 주소의 컴퓨터 HTTP 프로토콜을 사용해 <br>
URL 정보로 변환돼 웹 서버에서 해당 데이터를 찾는다. <br>
찾은 데이터는 다시 HTTP프로토콜을 사용해 HTTP 응답 메시지를 생성하고 <br>
TCP 프로토콜을 사용해 인터넷을 거쳐 사용자 컴퓨터에 도착한다. <br>
도착한 HTTP 응답 메시지는 HTTP 프로토콜을 사용해 데이터로 변환되고 <br>
웹 브라우저에 짜잔하고 나타난다. 사용자는 이용하면 된다. <br><br>

<img src="../../assets/images/domain.png"> <br>

> # 만약 DHCP를 사용하면 ?

<br>
DHCP 즉, Dynamic Host Configuration Protocol을 사용하면 <br>
사용자의 PC는 DHCP 서버에서 자신의 IP, 가장 가까운 라우터의 IP, <br>
가장 가까운 DNS 서버의 IP 주소를 받는다. <br>
ARP 프로톨을 사용해 IP 주소 기반 가장 가까운 라우터의 MAC주소 <br>
까지 검색하면 외부와 통신할 준비가 끝난다. <br><br>

이후, 사용자의 PC는 DNS 서버에 DNS Query를 전달하고 <br>
DNS서버는 Root네임서버에 요청(사용자 입력 URL)을 질의한다. <br>
Root네임서버는 요청에 해당하는 ip를 응답하고 <br>
DNS서버는 다시 해당 ip로 Root네임서버에 질의한다. <br>
그럼 Root네임서버는 다시 ip에 해당하는 IP를 응답한다. <br>
해당 IP를 알게되면 TCP Socket을 개방하게 되고 연결한다. <br>
TCP 연결이 성공하면, HTTP Request는 TCP Socket을 통해 보내지고 <br>
응답 데이터는 웹 브라우저에 짜잔하고 나타난다. <br><br>
