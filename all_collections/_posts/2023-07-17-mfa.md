---
layout: post
title: 🔧 AWS - MFA 설정 방법
date: 2023-07-17
categories: ["SamBeak", "MFA", "AWS", "ES2", "Node"]
---

> # 서론

<br>
<br>
최근 들어 알고리즘과 SQL을 풀어보는 재미에 빠져서 <br>
게임 하듯이 문제 풀며 시간을 보내는 것 같다. <br>
중간중간 Redux도 커스텀하기 위해 연구하다가 Hook이랑 연동도 해보다 <br>
결국 어느샌가 Node를 붙잡고 있는데 <br>
톰캣과 자바, mysql을 독립적으로 써오다가 AWS RDS를 생성하고 <br>
mysql을 사용하니 이렇게 신날 수가 없다. <br>
JS로 백엔드까지 함께 다룰 수 있다는 건 정말이지 아름답다. <br><br>

여튼, 서론이 길었지만 오늘 정리는 AWS에 대해 왜 사용하는지 <br>
처음 시작하기 위해 어떤 것들을 알아둬야 하는지 정리하고자 한다. <br><br>

AWS를 사용하는 여러가지 이유가 있겠지만, 처음 접하게 되는 이유엔 <br>
기업 공고에 적혀있는 'aws 배포 경험자' 혹은 '사용 경험자'가 있을 수도 있다. <br>
내가 그렇다. AWS와 첫 만남은 그렇게 시작했다. <br>
막연히 알아둬야하는 기술이겠거니 생각했지만 <br>
경험하는 지금, 왜 점유율이 높은지, 기업이 원하는지 알 수 있다. <br><br>

> # AWS의 MFA

<br>
AWS를 처음 이용하면, 꼭 놓치지 말아야할 것이 있다. <br>
그것은 MFA 설정이다. <br>
그렇다면 MFA란 도대체 무엇일까? <br>
MFA는 Multi-Factor Authentication의 약자로 <br>
다중 인증을 의미한다. <br>
이게 무슨 말일까 싶기도한데 <br>
흔히 게임을 해보신 분들이라면 이중 보안을 이용해본 적이 있을 것이다. <br>
로그인을 하면 그것으로 끝난 것이 아니라 <br>
한번 더 본인만 인증할 수 있는 방법으로 인증하는 것이다. <br>
한참 게임을 할 때는 핸드폰으로 인증했던 것 같은데... <br>
실제로 MFA 설정 페이지를 가보면 핸드폰 인증(가상 디바이스)이나 <br>
다른 방법들로도 인증할 수 있도록 소개되어 있다. <br><br>

> # 처음 AWS 계정을 생성했을 때

<br>
처음 AWS 계정을 생성하는 것은 <br>
root 계정으로 생성이 된다. <br>
그런데 공식 문서에도 나와있는 것처럼 <br>
root 계정으로 작업을 계속 해나가다보면 <br>
보안 이슈가 계속 발생하게 되고 <br>
한국에서도 간혹 들려오는 소식처럼 해킹을 당해 <br>
정말 상당한 요금이 청구된 사례도 발생한다. <br>
그래서 루트 계정을 직접적으로 사용하지 않고 <br>
루트 계정에 MFA를 설정하고, <br>
루트 계정 내 어드민 그륩 혹은 어드민 계정을 생성해 <br>
해당 그룹이나 계정에 권한을 직접적으로 부여해 <br>
어드민 계정으로 작업하기를 권장한다. <br>
물론, 이렇게 만든 어드민 계정도 MFA 보안을 설정해줘야한다. <br><br>

> # MFA 인증 방법

<br>
루트 계정에서 MFA를 설정할 땐, 보안 설정에서 작업하면 된다. <br>
MFA를 핸드폰에서 인증할 수 있도록하려면 <br>
구글 OTP 나 Authy 같은 어플을 이용하면 되는데 <br>
공식 문서는 Authy를 사용하길 권장한다. <br>
왜냐면 구글 OTP는 한 개의 디바이스만 등록이 가능한데 <br>
만약 핸드폰이 분실 되거나 고장이 난다면 <br>
MFA를 인증하지 못하는 상당히 난처한 상황이 연출된다. <br>
그런데, Authy는 멀티 디바이스에 등록이 가능하고 <br>
잃어버려도 복구가 가능하기 때문에 <br>
혹시 핸드폰을 잃어버리거나 놓고 오더라도 <br>
미리 등록해놓은 다른 디바이스로 인증할 수 있다. <br>
물론, 관점의 차이지만 오히려 멀티 디바이스라 <br>
보안을 더 완벽하게(?) 할 수 없다는 부분이 걸릴 수도 있을테니 <br>
이 부분은 선택하면 본인이 선택하면 좋을 것 같다. <br><br>

> # 사용자 그룹과 사용자 생성

<br>
루트 계정에 MFA를 설정한다면 IAM 대시보드가 활성화 될 것이다. <br>
그러면 사용자 그룹을 생성하거나 사용자를 생성해 <br>
그룹에 권한을 부여하거나 사용자에게 권한을 부여할 수 있다. <br>
사용자를 생성할 때 개인 계정이라면 <br>
AWS Management Console에 대한 <br>
사용자 액세스 권한 제공을 체크하고, <br>
IAM 사용자를 생성하고 싶음을 선택한다. <br>
되려 AWS는 해당 항목보단 위에 있는 항목을 체크하길 권하는데 <br>
규모가 회사정도는 되야 의미가 있다고 한다. <br>
AWS SSO를 사용하지도 않고, 보통 2-3개의 권한을 <br>
사용자에게 부여하는 정도로 개인 계정을 활용하기 때문에 <br>
음... 즉, 키 관리나 권한을 주는 것에 대한 불편함이 <br>
크지 않기 때문에 IAM 사용자를 생성하고 싶음을 선택해도 무방하다한다. <br><br>

다만, 사용자 생성이 끝나면 해야할 것이 두 가지 있는데 <br>
어드민 계정의 URL을 복사 후 바로 이동하지 말고 <br>
비밀번호를 꼭 복사해서 이동하는 것이 좋다 <br>
URL 이동하면 루트 계정의 로그인이 풀려 상당히 번거로워진다. <br>
그리고 AWS가 아예 처음이라면 꼭 생성자 아이디를 적어두거나 <br>
별칭을 설정해두는 것을 권장한다. <br>
보통 어드민 계정의 로그인은 사용자 이름과 비밀번호를 입력해 로그인하는데 <br>
가장 위에 Account ID도 함께 입력하도록 되어있다. <br>
그래서 12자리의 Account ID를 메모해두거나 <br>
별칭을 설정해둬서 별칭으로 로그인하도록 한다. <br><br>
